<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reserva de Transfer TVDE - Curvas Humildes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../static/css/reservas_form_styles.css">
</head>
<body>
    <div class="page-wrapper">
        <div class="main-content">
            <img src="logo.png" alt="Curvas Humildes Logótipo" class="company-logo"
                 onerror="this.alt='Logótipo Curvas Humildes não encontrado'; this.style.display='none'; console.error('Erro ao carregar logo.png');">
            
            <a href="https://www.curvashumildes.pt" class="back-to-site-link group">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                Voltar ao Site Principal
            </a>

            <div class="form-layout-grid">
                <div id="budgetSectionFlipWrapper"> 
                    <div class="flip-card" id="budgetFlipCard"> 
                        <div class="flip-card-inner" id="budgetFlipCardInner">
                            <div class="flip-card-front">
                                <h2>1. Calcular Orçamento</h2>
                                <form id="budgetForm" class="space-y-5 mt-2">
                                    <div class="flex-grow space-y-5">
                                        <div class="autocomplete-container">
                                            <label for="pickupLocationBudget" class="form-label">Local de Partida:</label>
                                            <input type="text" id="pickupLocationBudget" name="pickupLocation" class="form-input" placeholder="Ex: Aeroporto de Lisboa" required autocomplete="off">
                                            <div id="pickupSuggestions" class="autocomplete-suggestions" style="display: none;"></div>
                                        </div>
                                        <div class="autocomplete-container">
                                            <label for="dropoffLocationBudget" class="form-label">Local de Destino:</label>
                                            <input type="text" id="dropoffLocationBudget" name="dropoffLocation" class="form-input" placeholder="Ex: Hotel Mundial, Lisboa" required autocomplete="off">
                                            <div id="dropoffSuggestions" class="autocomplete-suggestions" style="display: none;"></div>
                                        </div>
                                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                            <div>
                                                <label for="passengersBudget" class="form-label">Nº Passageiros:</label>
                                                <input type="number" id="passengersBudget" name="passengers" class="form-input" min="1" value="1" required>
                                            </div>
                                            <div>
                                                <label for="bagsBudget" class="form-label">Nº Malas:</label>
                                                <input type="number" id="bagsBudget" name="bags" class="form-input" min="0" value="1" required>
                                            </div>
                                        </div>
                                    </div>
                                    <button type="submit" id="calculateBudgetBtn" class="btn btn-secondary w-full sm:w-auto">Calcular Orçamento</button>
                                </form>
                            </div>
                            <div class="flip-card-back">
                                <h2>Resultado do Orçamento</h2>
                                <div id="budgetResult" class="budget-display transitionable-element"></div>
                                <div id="budgetMessage" class="message-box transitionable-element"></div>
                                <button type="button" id="flipBackButton" class="btn btn-secondary w-full sm:w-auto">Novo Cálculo</button>
                            </div>
                        </div>
                    </div>

                    <div class="voucher-card-standalone" id="voucherCardStandalone">
                        <div id="voucherSection"> <label for="voucherCodeInput" class="form-label">Código Promocional (Opcional):</label>
                            <div class="input-group mt-1">
                                <input type="text" id="voucherCodeInput" name="voucher_code" class="form-input uppercase" placeholder="Ex: VERAO20">
                                <button type="button" id="applyVoucherBtn" class="btn btn-success whitespace-nowrap">Aplicar</button>
                            </div>
                            <div id="voucherMessage" class="message-box mt-3 transitionable-element"></div>
                        </div>
                    </div>
                </div>

                <div id="bookingSectionContainer" class="container section-disabled"> 
                    <h2 class="text-xl">2. Submeter Pedido de Reserva</h2>
                    <form id="bookingForm" class="space-y-5">
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div>
                                <label for="passengerName" class="form-label">Nome do Passageiro:</label>
                                <input type="text" id="passengerName" name="passengerName" class="form-input" value="" placeholder="Nome Completo" required>
                            </div>
                            <div>
                                <label for="passengerPhone" class="form-label">Telefone:</label>
                                <div class="phone-input-group">
                                    <select id="countryCodeSelect" name="country_code" class="form-select country-code-select">
                                    </select>
                                    <input type="tel" id="passengerPhone" name="passengerPhone" class="form-input phone-number-input" placeholder="Número de telefone" required>
                                </div>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div>
                                <label for="date" class="form-label">Data:</label>
                                <input type="date" id="date" name="date" class="form-input" required>
                            </div>
                            <div>
                                <label for="time" class="form-label">Hora:</label>
                                <input type="time" id="time" name="time" class="form-input" required>
                            </div>
                        </div>
                        <input type="hidden" id="pickupLocationBooking" name="pickupLocation">
                        <input type="hidden" id="dropoffLocationBooking" name="dropoffLocation">
                        <input type="hidden" id="passengersBooking" name="passengers">
                        <input type="hidden" id="bagsBooking" name="bags">
                        <input type="hidden" id="durationMinutesBooking" name="duration_minutes">
                        <input type="hidden" id="appliedVoucherCodeBooking" name="voucher_code">
                        <div>
                            <label for="instructions" class="form-label">Instruções Adicionais:</label>
                            <textarea id="instructions" name="instructions" rows="2" class="form-textarea" placeholder="Ex: Voo TP123, cadeira de bebé, etc."></textarea>
                        </div>
                        <button type="submit" id="submitBookingBtn" class="btn btn-primary w-full sm:w-auto">Submeter Pedido</button>
                    </form>
                    <div id="bookingMessage" class="message-box transitionable-element"></div>
                </div>
            </div> </div> <footer class="site-footer">
            <p>&copy; <span id="currentYear"></span> Curvas Humildes. Todos os direitos reservados.</p>
            <p>Este é um formulário de teste para demonstração.</p>
            <p><a href="mailto:geral@curvashumildes.pt">geral@curvashumildes.pt</a></p>
        </footer>
    </div> 
    
    <script src="{{ url_for('static', filename='js/reservas_form_scripts.js') }}"></script>

    <script>
        if(document.getElementById('currentYear')) { 
            document.getElementById('currentYear').textContent = new Date().getFullYear();
        }
    </script>
</body>
</html>
